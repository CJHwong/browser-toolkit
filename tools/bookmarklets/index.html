<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bookmarklet Showcase - Browser Toolkit</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap');

      :root {
        --background: #f5f4ed;
        --surface: #fcfbf7;
        --border: #e4e2da;
        --text-primary: #383631;
        --text-secondary: #7a7874;
        --primary: #607d8b;
        --primary-hover: #546e7a;
        --code-bg: #f0f0f0;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          'Inter',
          -apple-system,
          BlinkMacSystemFont,
          'Segoe UI',
          Roboto,
          Oxygen,
          Ubuntu,
          Cantarell,
          sans-serif;
        line-height: 1.6;
        color: var(--text-primary);
        background-color: var(--background);
        min-height: 100vh;
        padding: 2rem 1rem;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
      }

      .header {
        padding: 3rem 2rem;
        text-align: center;
      }

      .header h1 {
        font-size: 2.8rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      .header p {
        font-size: 1.1rem;
        color: var(--text-secondary);
        max-width: 600px;
        margin: 0 auto;
      }
      
      .header a {
        color: var(--primary);
        text-decoration: none;
      }
      
      .header a:hover {
        text-decoration: underline;
      }

      .bookmarklet-list {
        display: grid;
        gap: 2.5rem;
        padding: 1rem;
      }

      .bookmarklet-card {
        background: var(--surface);
        border-radius: 12px;
        padding: 2rem;
        border: 1px solid var(--border);
      }

      .bookmarklet-card h3 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
      }

      .bookmarklet-card .description {
        color: var(--text-secondary);
        line-height: 1.5;
        margin-bottom: 1.5rem;
      }

      .bookmarklet-link {
        display: inline-block;
        background-color: var(--primary);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 500;
        transition: background-color 0.3s ease;
        cursor: grab;
      }

      .bookmarklet-link:hover {
        background-color: var(--primary-hover);
      }
      
      .bookmarklet-link:active {
        cursor: grabbing;
      }

      .code-toggle {
        margin-top: 1.5rem;
      }

      .code-toggle summary {
        cursor: pointer;
        font-weight: 500;
        color: var(--text-secondary);
        padding: 0.5rem 0;
      }
      
      .code-toggle summary:hover {
        color: var(--text-primary);
      }

      .code-toggle pre {
        background-color: var(--code-bg);
        border-radius: 8px;
        padding: 1rem;
        margin-top: 0.5rem;
        overflow-x: auto;
        border: 1px solid var(--border);
      }

      .code-toggle code {
        font-family: 'Fira Code', monospace;
        font-size: 0.9rem;
        color: var(--text-primary);
      }

      .footer {
        padding: 2rem;
        text-align: center;
        color: var(--text-secondary);
        border-top: 1px solid var(--border);
        margin-top: 4rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header class="header">
        <h1>Bookmarklet Showcase</h1>
        <p>A collection of useful bookmarklets. Drag the blue buttons to your browser's bookmarks bar.</p>
      </header>

      <main class="bookmarklet-list">
        <section class="bookmarklet-card">
          <h3>Simplified to Traditional Chinese Converter</h3>
          <p class="description">
            Converts all text on a webpage from Simplified Chinese to Traditional Chinese (Taiwan standard, with phrases). Uses the OpenCC-JS library.
          </p>
          <a
            href="javascript:(async%20function()%7Bif(typeof%20OpenCC%3D%3D%3D'undefined')%7Bconst%20script%3Ddocument.createElement('script')%3Bscript.src%3D'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fopencc-js%401.0%2Fdist%2Fumd%2Ffull.js'%3Bdocument.head.appendChild(script)%3Bawait%20new%20Promise(resolve%3D%3E%7Bscript.onload%3Dresolve%3B%7D)%3B%7Dconsole.log(%22OpenCC%20loaded.%20Starting%20conversion...%22)%3Btry%7Bconst%20converter%3Dawait%20OpenCC.Converter(%7Bfrom%3A'cn'%2Cto%3A'twp'%7D)%3Bconst%20walk%3D(node)%3D%3E%7Bif(node.nodeType%3D%3D%3D3)%7Bconst%20text%3Dnode.nodeValue%3Bconst%20convertedText%3Dconverter(text)%3Bif(convertedText!%3D%3Dtext)%7Bnode.nodeValue%3DconvertedText%3B%7Dreturn%3B%7Dif(node.nodeType%3D%3D%3D1%26%26node.nodeName!%3D'SCRIPT'%26%26node.nodeName!%3D'STYLE')%7Bfor(let%20i%3D0%3Bi%3Cnode.childNodes.length%3Bi%2B%2B)%7Bwalk(node.childNodes%5Bi%5D)%3B%7D%7D%7D%3Bwalk(document.body)%3Bconsole.log(%22Page%20converted%20to%20Traditional%20Chinese.%22)%3B%7Dcatch(error)%7Bconsole.error(%22Failed%20to%20convert%20page%3A%22%2Cerror)%3Balert(%22Failed%20to%20convert%20page%20to%20Traditional%20Chinese.%20See%20console%20for%20details.%22)%3B%7D%7D)()%3B"
            class="bookmarklet-link"
            title="Drag this button to your bookmarks bar to save it."
            >Convert SC->TC</a
          >
          <details class="code-toggle">
            <summary>View Source Code</summary>
            <pre><code>// This is the readable version of the code
(async function() {
    // 1. Check if OpenCC is already on the page. If not, create a script tag to load it.
    if (typeof OpenCC === 'undefined') {
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/opencc-js@1.0/dist/umd/full.js';
        document.head.appendChild(script);

        // Wait for the script to load before continuing
        await new Promise(resolve => {
            script.onload = resolve;
        });
    }

    // 2. Now that the script is loaded, run the conversion logic.
    console.log("OpenCC loaded. Starting conversion...");
    try {
        const converter = await OpenCC.Converter({ from: 'cn', to: 'twp' });

        const walk = (node) => {
            // Process text nodes
            if (node.nodeType === 3) {
                const text = node.nodeValue;
                const convertedText = converter(text);
                if (convertedText !== text) {
                    node.nodeValue = convertedText;
                }
                return;
            }

            // Process element nodes (but not scripts or styles)
            if (node.nodeType === 1 && node.nodeName !== 'SCRIPT' && node.nodeName !== 'STYLE') {
                for (let i = 0; i < node.childNodes.length; i++) {
                    walk(node.childNodes[i]);
                }
            }
        };

        walk(document.body);
        console.log("Page converted to Traditional Chinese.");

    } catch (error) {
        console.error("Failed to convert page:", error);
        alert("Failed to convert page to Traditional Chinese. See console for details.");
    }
})();</code></pre>
          </details>
        </section>
      </main>

      <footer class="footer">
        <p>
          Part of the
          <a href="https://github.com/CJHwong/browser-toolkit" target="_blank"
            >Browser Toolkit</a
          >
          collection.
        </p>
      </footer>
    </div>
  </body>
</html>
